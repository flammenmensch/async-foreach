<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>async-foreach example 1</title>
</head>
<body>
    <script type="text/javascript" src="../lib/async-foreach.js"></script>
    <script type="text/javascript">
        (function () {
            var source = [ ];
            var numItems = 0;
            for (var i = 0; i < numItems; i++) {
                source.push('"Item ' + i + '"');
            }

            var itemCallback = function (item, index, next) {
                console.log('Processing item %s at index %s', item, index);

                setTimeout(function () {
                    console.log('Finished processing item %s at index %s', item, index);
                    next();
                }, 10);
            };

            var doneCallback = function () {
                console.log('Done');
            };

            console.log('Before asyncForEach');
            Lib.asyncForEach(source, itemCallback, doneCallback);
            console.log('After asyncForEach');
        } ());
    </script>
</body>
</html>